<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="ja">
<head>
<!-- Generated by javadoc (1.8.0_05) on Mon Sep 07 15:33:08 JST 2015 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>RedisOperationsSessionRepository</title>
<meta name="date" content="2015-09-07">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="RedisOperationsSessionRepository";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>ブラウザのJavaScriptが無効になっています。</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="ナビゲーション・リンクをスキップ">ナビゲーション・リンクをスキップ</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="ナビゲーション">
<li><a href="../../../../../overview-summary.html">概要</a></li>
<li><a href="package-summary.html">パッケージ</a></li>
<li class="navBarCell1Rev">クラス</li>
<li><a href="class-use/RedisOperationsSessionRepository.html">使用</a></li>
<li><a href="package-tree.html">階層ツリー</a></li>
<li><a href="../../../../../deprecated-list.html">非推奨</a></li>
<li><a href="../../../../../index-files/index-1.html">索引</a></li>
<li><a href="../../../../../help-doc.html">ヘルプ</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/sxb/session/data/redis/MessageListener.html" title="org.sxb.session.data.redis内のインタフェース"><span class="typeNameLink">前のクラス</span></a></li>
<li><a href="../../../../../org/sxb/session/data/redis/SessionMessageListener.html" title="org.sxb.session.data.redis内のクラス"><span class="typeNameLink">次のクラス</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/sxb/session/data/redis/RedisOperationsSessionRepository.html" target="_top">フレーム</a></li>
<li><a href="RedisOperationsSessionRepository.html" target="_top">フレームなし</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">すべてのクラス</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li>ネスト&nbsp;|&nbsp;</li>
<li>フィールド&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">コンストラクタ</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">メソッド</a></li>
</ul>
<ul class="subNavList">
<li>詳細:&nbsp;</li>
<li>フィールド&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">コンストラクタ</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">メソッド</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.sxb.session.data.redis</div>
<h2 title="クラス RedisOperationsSessionRepository" class="title">クラス RedisOperationsSessionRepository</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.sxb.session.data.redis.RedisOperationsSessionRepository</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>すべての実装されたインタフェース:</dt>
<dd>java.io.Serializable, <a href="../../../../../org/sxb/session/data/redis/MessageListener.html" title="org.sxb.session.data.redis内のインタフェース">MessageListener</a>, <a href="../../../../../org/sxb/session/FindByPrincipalNameSessionRepository.html" title="org.sxb.session内のインタフェース">FindByPrincipalNameSessionRepository</a>&lt;org.sxb.session.data.redis.RedisOperationsSessionRepository.RedisSession&gt;, <a href="../../../../../org/sxb/session/SessionRepository.html" title="org.sxb.session内のインタフェース">SessionRepository</a>&lt;org.sxb.session.data.redis.RedisOperationsSessionRepository.RedisSession&gt;</dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">RedisOperationsSessionRepository</span>
extends java.lang.Object
implements <a href="../../../../../org/sxb/session/FindByPrincipalNameSessionRepository.html" title="org.sxb.session内のインタフェース">FindByPrincipalNameSessionRepository</a>&lt;org.sxb.session.data.redis.RedisOperationsSessionRepository.RedisSession&gt;, <a href="../../../../../org/sxb/session/data/redis/MessageListener.html" title="org.sxb.session.data.redis内のインタフェース">MessageListener</a>, java.io.Serializable</pre>
<div class="block"><p>
 A <a href="../../../../../org/sxb/session/SessionRepository.html" title="org.sxb.session内のインタフェース"><code>SessionRepository</code></a> that is implemented
 using Sxb Data's
 <a href="../../../../../org/sxb/data/redis/core/RedisOperations.html" title="org.sxb.data.redis.core内のインタフェース"><code>RedisOperations</code></a>. In a web
 environment, this is typically used in combination with
 <a href="../../../../../org/sxb/session/web/http/SessionRepositoryFilter.html" title="org.sxb.session.web.http内のクラス"><code>SessionRepositoryFilter</code></a>. This implementation supports
 <a href="../../../../../org/sxb/session/events/SessionDeletedEvent.html" title="org.sxb.session.events内のクラス"><code>SessionDeletedEvent</code></a> and <a href="../../../../../org/sxb/session/events/SessionExpiredEvent.html" title="org.sxb.session.events内のクラス"><code>SessionExpiredEvent</code></a> by implementing <a href="../../../../../org/sxb/session/data/redis/MessageListener.html" title="org.sxb.session.data.redis内のインタフェース"><code>MessageListener</code></a>.
 </p>

 <h2>Creating a new instance</h2>

 A typical example of how to create a new instance can be seen below:

 <pre>
 JedisConnectionFactory factory = new JedisConnectionFactory();

 RedisOperationsSessionRepository redisSessionRepository = new RedisOperationsSessionRepository(factory);
 </pre>


 <h2>Storage Details</h2>

 The sections below outline how Redis is updated for each operation. An
 example of creating a new session can be found below. The subsequent sections
 describe the details.

 <pre>
 HMSET sxb:session:sessions:33fdd1b6-b496-4b33-9f7d-df96679d32fe creationTime 1404360000000 maxInactiveInterval 1800 lastAccessedTime 1404360000000 sessionAttr:attrName someAttrValue sessionAttr2:attrName someAttrValue2
 EXPIRE sxb:session:sessions:33fdd1b6-b496-4b33-9f7d-df96679d32fe 2100
 APPEND sxb:session:sessions:expires:33fdd1b6-b496-4b33-9f7d-df96679d32fe ""
 EXPIRE sxb:session:sessions:expires:33fdd1b6-b496-4b33-9f7d-df96679d32fe 1800
 SADD sxb:session:expirations:1439245080000 expires:33fdd1b6-b496-4b33-9f7d-df96679d32fe
 EXPIRE sxb:session:expirations1439245080000 2100
 </pre>

 <h3>Saving a Session</h3>

 <p>
 Each session is stored in Redis as a
 <a href="http://redis.io/topics/data-types#hashes">Hash</a>. Each session is
 set and updated using the <a href="http://redis.io/commands/hmset">HMSET
 command</a>. An example of how each session is stored can be seen below.
 </p>

 <pre>
 HMSET sxb:session:sessions:33fdd1b6-b496-4b33-9f7d-df96679d32fe creationTime 1404360000000 maxInactiveInterval 1800 lastAccessedTime 1404360000000 sessionAttr:attrName someAttrValue sessionAttr:attrName2 someAttrValue2
 </pre>

 <p>
 In this example, the session following statements are true about the session:
 </p>
 <ul>
 <li>The session id is 33fdd1b6-b496-4b33-9f7d-df96679d32fe</li>
 <li>The session was created at 1404360000000 in milliseconds since midnight
 of 1/1/1970 GMT.</li>
 <li>The session expires in 1800 seconds (30 minutes).</li>
 <li>The session was last accessed at 1404360000000 in milliseconds since
 midnight of 1/1/1970 GMT.</li>
 <li>The session has two attributes. The first is "attrName" with the value of
 "someAttrValue". The second session attribute is named "attrName2" with the
 value of "someAttrValue2".</li>
 </ul>


 <h3>Optimized Writes</h3>

 <p>
 The <code>RedisSession</code> keeps track of the properties that have changed and
 only updates those. This means if an attribute is written once and read many
 times we only need to write that attribute once. For example, assume the
 session attribute "sessionAttr2" from earlier was updated. The following
 would be executed upon saving:
 </p>

 <pre>
 HMSET sxb:session:sessions:33fdd1b6-b496-4b33-9f7d-df96679d32fe sessionAttr:attrName2 newValue
 </pre>

 <h3>SessionCreatedEvent</h3>

 <p>
 When a session is created an event is sent to Redis with the channel of
 "sxb:session:channel:created:33fdd1b6-b496-4b33-9f7d-df96679d32fe" such
 that "33fdd1b6-b496-4b33-9f7d-df96679d32fe" is the sesion id. The body of the
 event will be the session that was created.
 </p>

 <p>
 If registered as a <a href="../../../../../org/sxb/session/data/redis/MessageListener.html" title="org.sxb.session.data.redis内のインタフェース"><code>MessageListener</code></a>, then
 <a href="../../../../../org/sxb/session/data/redis/RedisOperationsSessionRepository.html" title="org.sxb.session.data.redis内のクラス"><code>RedisOperationsSessionRepository</code></a> will then translate the Redis
 message into a <a href="../../../../../org/sxb/session/events/SessionCreatedEvent.html" title="org.sxb.session.events内のクラス"><code>SessionCreatedEvent</code></a>.
 </p>

 <h3>Expiration</h3>

 <p>
 An expiration is associated to each session using the
 <a href="http://redis.io/commands/expire">EXPIRE command</a> based upon the
 <code>RedisSession#getMaxInactiveIntervalInSeconds()</code>
 . For example:
 </p>

 <pre>
 EXPIRE sxb:session:sessions:33fdd1b6-b496-4b33-9f7d-df96679d32fe 2100
 </pre>

 <p>
 You will note that the expiration that is set is 5 minutes after the session
 actually expires. This is necessary so that the value of the session can be
 accessed when the session expires. An expiration is set on the session itself
 five minutes after it actually expires to ensure it is cleaned up, but only
 after we perform any necessary processing.
 </p>

 <p>
 <b>NOTE:</b> The <a href="../../../../../org/sxb/session/data/redis/RedisOperationsSessionRepository.html#getSession-java.lang.String-"><code>getSession(String)</code></a> method ensures that no expired
 sessions will be returned. This means there is no need to check the
 expiration before using a session
 </p>

 <p>
 Sxb Session relies on the expired and delete
 <a href="http://redis.io/topics/notifications">keyspace notifications</a>
 from Redis to fire a SessionDestroyedEvent. It is the SessionDestroyedEvent
 that ensures resources associated with the Session are cleaned up. For
 example, when using Sxb Session's WebSocket support the Redis expired or
 delete event is what triggers any WebSocket connections associated with the
 session to be closed.
 </p>

 <p>
 Expiration is not tracked directly on the session key itself since this would
 mean the session data would no longer be available. Instead a special session
 expires key is used. In our example the expires key is:
 </p>

 <pre>
 APPEND spring:session:sessions:expires:33fdd1b6-b496-4b33-9f7d-df96679d32fe ""
 EXPIRE spring:session:sessions:expires:33fdd1b6-b496-4b33-9f7d-df96679d32fe 1800
 </pre>

 <p>
 When a session expires key is deleted or expires, the keyspace notification
 triggers a lookup of the actual session and a <a href="../../../../../org/sxb/session/events/SessionDestroyedEvent.html" title="org.sxb.session.events内のクラス"><code>SessionDestroyedEvent</code></a>
 is fired.
 </p>

 <p>
 One problem with relying on Redis expiration exclusively is that Redis makes
 no guarantee of when the expired event will be fired if they key has not been
 accessed. Specifically the background task that Redis uses to clean up
 expired keys is a low priority task and may not trigger the key expiration.
 For additional details see
 <a href="http://redis.io/topics/notifications">Timing of expired events</a>
 section in the Redis documentation.
 </p>

 <p>
 To circumvent the fact that expired events are not guaranteed to happen we
 can ensure that each key is accessed when it is expected to expire. This
 means that if the TTL is expired on the key, Redis will remove the key and
 fire the expired event when we try to access they key.
 </p>

 <p>
 For this reason, each session expiration is also tracked to the nearest
 minute. This allows a background task to access the potentially expired
 sessions to ensure that Redis expired events are fired in a more
 deterministic fashion. For example:
 </p>

 <pre>
 SADD sxb:session:expirations:1439245080000 expires:33fdd1b6-b496-4b33-9f7d-df96679d32fe
 EXPIRE sxb:session:expirations1439245080000 2100
 </pre>

 <p>
 The background task will then use these mappings to explicitly request each
 session expires key. By accessing the key, rather than deleting it, we ensure
 that Redis deletes the key for us only if the TTL is expired.
 </p>
 <p>
 <b>NOTE</b>: We do not explicitly delete the keys since in some instances
 there may be a race condition that incorrectly identifies a key as expired
 when it is not. Short of using distributed locks (which would kill our
 performance) there is no way to ensure the consistency of the expiration
 mapping. By simply accessing the key, we ensure that the key is only removed
 if the TTL on that key is expired.
 </p></div>
<dl>
<dt><span class="simpleTagLabel">導入されたバージョン:</span></dt>
<dd>2.0</dd>
<dt><span class="simpleTagLabel">作成者:</span></dt>
<dd>Jeffson, Rob Winch</dd>
<dt><span class="seeLabel">関連項目:</span></dt>
<dd><a href="../../../../../serialized-form.html#org.sxb.session.data.redis.RedisOperationsSessionRepository">直列化された形式</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>コンストラクタの概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="コンストラクタの概要表、コンストラクタのリストおよび説明">
<caption><span>コンストラクタ</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">コンストラクタと説明</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/sxb/session/data/redis/RedisOperationsSessionRepository.html#RedisOperationsSessionRepository-org.sxb.data.redis.connection.RedisConnectionFactory-">RedisOperationsSessionRepository</a></span>(<a href="../../../../../org/sxb/data/redis/connection/RedisConnectionFactory.html" title="org.sxb.data.redis.connection内のインタフェース">RedisConnectionFactory</a>&nbsp;redisConnectionFactory)</code>
<div class="block">Allows creating an instance and uses a default <a href="../../../../../org/sxb/data/redis/core/RedisOperations.html" title="org.sxb.data.redis.core内のインタフェース"><code>RedisOperations</code></a> for both managing the session and the expirations.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/sxb/session/data/redis/RedisOperationsSessionRepository.html#RedisOperationsSessionRepository-org.sxb.data.redis.core.RedisOperations-">RedisOperationsSessionRepository</a></span>(<a href="../../../../../org/sxb/data/redis/core/RedisOperations.html" title="org.sxb.data.redis.core内のインタフェース">RedisOperations</a>&lt;java.lang.Object,java.lang.Object&gt;&nbsp;sessionRedisOperations)</code>
<div class="block">Creates a new instance.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>メソッドの概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="メソッドの概要表、メソッドのリストおよび説明">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">修飾子とタイプ</th>
<th class="colLast" scope="col">メソッドと説明</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/sxb/session/data/redis/RedisOperationsSessionRepository.html#cleanupExpiredSessions--">cleanupExpiredSessions</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>org.sxb.session.data.redis.RedisOperationsSessionRepository.RedisSession</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/sxb/session/data/redis/RedisOperationsSessionRepository.html#createSession--">createSession</a></span>()</code>
<div class="block">Creates a new <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> that is capable of being persisted by this <a href="../../../../../org/sxb/session/SessionRepository.html" title="org.sxb.session内のインタフェース"><code>SessionRepository</code></a>.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/sxb/session/data/redis/RedisOperationsSessionRepository.html#delete-java.lang.String-">delete</a></span>(java.lang.String&nbsp;sessionId)</code>
<div class="block">Deletes the <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> with the given <a href="../../../../../org/sxb/session/Session.html#getId--"><code>Session.getId()</code></a> or does nothing if the <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> is not found.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>java.util.Map&lt;java.lang.String,org.sxb.session.data.redis.RedisOperationsSessionRepository.RedisSession&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/sxb/session/data/redis/RedisOperationsSessionRepository.html#findByPrincipalName-java.lang.String-">findByPrincipalName</a></span>(java.lang.String&nbsp;principalName)</code>
<div class="block">Find a Map of the session id to the <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> of all sessions that
 contain the session attribute with the name
 <a href="../../../../../org/sxb/session/Session.html#PRINCIPAL_NAME_ATTRIBUTE_NAME"><code>Session.PRINCIPAL_NAME_ATTRIBUTE_NAME</code></a> and the value of the
 specified principal name.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>org.sxb.session.data.redis.RedisOperationsSessionRepository.RedisSession</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/sxb/session/data/redis/RedisOperationsSessionRepository.html#getSession-java.lang.String-">getSession</a></span>(java.lang.String&nbsp;id)</code>
<div class="block">Gets the <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> by the <a href="../../../../../org/sxb/session/Session.html#getId--"><code>Session.getId()</code></a> or null if no <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> is found.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/sxb/session/data/redis/RedisOperationsSessionRepository.html#getSessionCreatedChannelPrefix--">getSessionCreatedChannelPrefix</a></span>()</code>
<div class="block">Gets the prefix for the channel that SessionCreatedEvent are published to.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/sxb/session/data/redis/RedisOperationsSessionRepository.html#handleCreated-java.util.Map-java.lang.String-">handleCreated</a></span>(java.util.Map&lt;java.lang.Object,java.lang.Object&gt;&nbsp;loaded,
             java.lang.String&nbsp;channel)</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/sxb/session/data/redis/RedisOperationsSessionRepository.html#onMessage-org.sxb.session.data.redis.Message-byte:A-">onMessage</a></span>(<a href="../../../../../org/sxb/session/data/redis/Message.html" title="org.sxb.session.data.redis内のインタフェース">Message</a>&nbsp;message,
         byte[]&nbsp;pattern)</code>
<div class="block">Callback for processing received objects through Redis.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/sxb/session/data/redis/RedisOperationsSessionRepository.html#save-org.sxb.session.data.redis.RedisOperationsSessionRepository.RedisSession-">save</a></span>(org.sxb.session.data.redis.RedisOperationsSessionRepository.RedisSession&nbsp;session)</code>
<div class="block">Ensures the <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> created by <a href="../../../../../org/sxb/session/SessionRepository.html#createSession--"><code>SessionRepository.createSession()</code></a> is saved.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/sxb/session/data/redis/RedisOperationsSessionRepository.html#setApplicationEventPublisher-org.sxb.session.data.redis.ApplicationEventPublisher-">setApplicationEventPublisher</a></span>(<a href="../../../../../org/sxb/session/data/redis/ApplicationEventPublisher.html" title="org.sxb.session.data.redis内のインタフェース">ApplicationEventPublisher</a>&nbsp;applicationEventPublisher)</code>
<div class="block">Sets the <a href="../../../../../org/sxb/session/data/redis/ApplicationEventPublisher.html" title="org.sxb.session.data.redis内のインタフェース"><code>ApplicationEventPublisher</code></a> that is used to publish
 <a href="../../../../../org/sxb/session/events/SessionDestroyedEvent.html" title="org.sxb.session.events内のクラス"><code>SessionDestroyedEvent</code></a>.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/sxb/session/data/redis/RedisOperationsSessionRepository.html#setDefaultMaxInactiveInterval-int-">setDefaultMaxInactiveInterval</a></span>(int&nbsp;defaultMaxInactiveInterval)</code>
<div class="block">Sets the maximum inactive interval in seconds between requests before newly created sessions will be
 invalidated.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/sxb/session/data/redis/RedisOperationsSessionRepository.html#setRedisKeyNamespace-java.lang.String-">setRedisKeyNamespace</a></span>(java.lang.String&nbsp;namespace)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>クラスから継承されたメソッド&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>コンストラクタの詳細</h3>
<a name="RedisOperationsSessionRepository-org.sxb.data.redis.connection.RedisConnectionFactory-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>RedisOperationsSessionRepository</h4>
<pre>public&nbsp;RedisOperationsSessionRepository(<a href="../../../../../org/sxb/data/redis/connection/RedisConnectionFactory.html" title="org.sxb.data.redis.connection内のインタフェース">RedisConnectionFactory</a>&nbsp;redisConnectionFactory)</pre>
<div class="block">Allows creating an instance and uses a default <a href="../../../../../org/sxb/data/redis/core/RedisOperations.html" title="org.sxb.data.redis.core内のインタフェース"><code>RedisOperations</code></a> for both managing the session and the expirations.</div>
<dl>
<dt><span class="paramLabel">パラメータ:</span></dt>
<dd><code>redisConnectionFactory</code> - the <a href="../../../../../org/sxb/data/redis/connection/RedisConnectionFactory.html" title="org.sxb.data.redis.connection内のインタフェース"><code>RedisConnectionFactory</code></a> to use.</dd>
</dl>
</li>
</ul>
<a name="RedisOperationsSessionRepository-org.sxb.data.redis.core.RedisOperations-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>RedisOperationsSessionRepository</h4>
<pre>public&nbsp;RedisOperationsSessionRepository(<a href="../../../../../org/sxb/data/redis/core/RedisOperations.html" title="org.sxb.data.redis.core内のインタフェース">RedisOperations</a>&lt;java.lang.Object,java.lang.Object&gt;&nbsp;sessionRedisOperations)</pre>
<div class="block">Creates a new instance. For an example, refer to the class level javadoc.</div>
<dl>
<dt><span class="paramLabel">パラメータ:</span></dt>
<dd><code>sessionRedisOperations</code> - The <a href="../../../../../org/sxb/data/redis/core/RedisOperations.html" title="org.sxb.data.redis.core内のインタフェース"><code>RedisOperations</code></a> to use for managing the sessions. Cannot be null.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>メソッドの詳細</h3>
<a name="setApplicationEventPublisher-org.sxb.session.data.redis.ApplicationEventPublisher-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setApplicationEventPublisher</h4>
<pre>public&nbsp;void&nbsp;setApplicationEventPublisher(<a href="../../../../../org/sxb/session/data/redis/ApplicationEventPublisher.html" title="org.sxb.session.data.redis内のインタフェース">ApplicationEventPublisher</a>&nbsp;applicationEventPublisher)</pre>
<div class="block">Sets the <a href="../../../../../org/sxb/session/data/redis/ApplicationEventPublisher.html" title="org.sxb.session.data.redis内のインタフェース"><code>ApplicationEventPublisher</code></a> that is used to publish
 <a href="../../../../../org/sxb/session/events/SessionDestroyedEvent.html" title="org.sxb.session.events内のクラス"><code>SessionDestroyedEvent</code></a>. The default is to not publish a
 <a href="../../../../../org/sxb/session/events/SessionDestroyedEvent.html" title="org.sxb.session.events内のクラス"><code>SessionDestroyedEvent</code></a>.</div>
<dl>
<dt><span class="paramLabel">パラメータ:</span></dt>
<dd><code>applicationEventPublisher</code> - the <a href="../../../../../org/sxb/session/data/redis/ApplicationEventPublisher.html" title="org.sxb.session.data.redis内のインタフェース"><code>ApplicationEventPublisher</code></a> that is used to publish
            <a href="../../../../../org/sxb/session/events/SessionDestroyedEvent.html" title="org.sxb.session.events内のクラス"><code>SessionDestroyedEvent</code></a>. Cannot be null.</dd>
</dl>
</li>
</ul>
<a name="setDefaultMaxInactiveInterval-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDefaultMaxInactiveInterval</h4>
<pre>public&nbsp;void&nbsp;setDefaultMaxInactiveInterval(int&nbsp;defaultMaxInactiveInterval)</pre>
<div class="block">Sets the maximum inactive interval in seconds between requests before newly created sessions will be
 invalidated. A negative time indicates that the session will never timeout. The default is 1800 (30 minutes).</div>
<dl>
<dt><span class="paramLabel">パラメータ:</span></dt>
<dd><code>defaultMaxInactiveInterval</code> - the number of seconds that the <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> should be kept alive between
                                    client requests.</dd>
</dl>
</li>
</ul>
<a name="save-org.sxb.session.data.redis.RedisOperationsSessionRepository.RedisSession-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>save</h4>
<pre>public&nbsp;void&nbsp;save(org.sxb.session.data.redis.RedisOperationsSessionRepository.RedisSession&nbsp;session)</pre>
<div class="block"><span class="descfrmTypeLabel">インタフェースからコピーされた説明:&nbsp;<code><a href="../../../../../org/sxb/session/SessionRepository.html#save-S-">SessionRepository</a></code></span></div>
<div class="block">Ensures the <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> created by <a href="../../../../../org/sxb/session/SessionRepository.html#createSession--"><code>SessionRepository.createSession()</code></a> is saved.

 <p>
 Some implementations may choose to save as the <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> is updated by returning a <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> that
 immediately persists any changes. In this case, this method may not actually do anything.
 </p></div>
<dl>
<dt><span class="overrideSpecifyLabel">定義:</span></dt>
<dd><code><a href="../../../../../org/sxb/session/SessionRepository.html#save-S-">save</a></code>&nbsp;インタフェース内&nbsp;<code><a href="../../../../../org/sxb/session/SessionRepository.html" title="org.sxb.session内のインタフェース">SessionRepository</a>&lt;org.sxb.session.data.redis.RedisOperationsSessionRepository.RedisSession&gt;</code></dd>
<dt><span class="paramLabel">パラメータ:</span></dt>
<dd><code>session</code> - the <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> to save</dd>
</dl>
</li>
</ul>
<a name="cleanupExpiredSessions--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cleanupExpiredSessions</h4>
<pre>public&nbsp;void&nbsp;cleanupExpiredSessions()</pre>
</li>
</ul>
<a name="getSession-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSession</h4>
<pre>public&nbsp;org.sxb.session.data.redis.RedisOperationsSessionRepository.RedisSession&nbsp;getSession(java.lang.String&nbsp;id)</pre>
<div class="block"><span class="descfrmTypeLabel">インタフェースからコピーされた説明:&nbsp;<code><a href="../../../../../org/sxb/session/SessionRepository.html#getSession-java.lang.String-">SessionRepository</a></code></span></div>
<div class="block">Gets the <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> by the <a href="../../../../../org/sxb/session/Session.html#getId--"><code>Session.getId()</code></a> or null if no <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> is found.

 <p>
 If the <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> extends <a href="../../../../../org/sxb/session/ExpiringSession.html" title="org.sxb.session内のインタフェース"><code>ExpiringSession</code></a>, then <a href="../../../../../org/sxb/session/ExpiringSession.html#getLastAccessedTime--"><code>ExpiringSession.getLastAccessedTime()</code></a> will be
 updated on the returned object. In order to persist this change, <a href="../../../../../org/sxb/session/SessionRepository.html#save-S-"><code>SessionRepository.save(Session)</code></a> must be invoked on the returned
 instance.
 </p></div>
<dl>
<dt><span class="overrideSpecifyLabel">定義:</span></dt>
<dd><code><a href="../../../../../org/sxb/session/SessionRepository.html#getSession-java.lang.String-">getSession</a></code>&nbsp;インタフェース内&nbsp;<code><a href="../../../../../org/sxb/session/SessionRepository.html" title="org.sxb.session内のインタフェース">SessionRepository</a>&lt;org.sxb.session.data.redis.RedisOperationsSessionRepository.RedisSession&gt;</code></dd>
<dt><span class="paramLabel">パラメータ:</span></dt>
<dd><code>id</code> - the <a href="../../../../../org/sxb/session/Session.html#getId--"><code>Session.getId()</code></a> to lookup</dd>
<dt><span class="returnLabel">戻り値:</span></dt>
<dd>the <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> by the <a href="../../../../../org/sxb/session/Session.html#getId--"><code>Session.getId()</code></a> or null if no <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> is found.</dd>
</dl>
</li>
</ul>
<a name="findByPrincipalName-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findByPrincipalName</h4>
<pre>public&nbsp;java.util.Map&lt;java.lang.String,org.sxb.session.data.redis.RedisOperationsSessionRepository.RedisSession&gt;&nbsp;findByPrincipalName(java.lang.String&nbsp;principalName)</pre>
<div class="block"><span class="descfrmTypeLabel">インタフェースからコピーされた説明:&nbsp;<code><a href="../../../../../org/sxb/session/FindByPrincipalNameSessionRepository.html#findByPrincipalName-java.lang.String-">FindByPrincipalNameSessionRepository</a></code></span></div>
<div class="block">Find a Map of the session id to the <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> of all sessions that
 contain the session attribute with the name
 <a href="../../../../../org/sxb/session/Session.html#PRINCIPAL_NAME_ATTRIBUTE_NAME"><code>Session.PRINCIPAL_NAME_ATTRIBUTE_NAME</code></a> and the value of the
 specified principal name.</div>
<dl>
<dt><span class="overrideSpecifyLabel">定義:</span></dt>
<dd><code><a href="../../../../../org/sxb/session/FindByPrincipalNameSessionRepository.html#findByPrincipalName-java.lang.String-">findByPrincipalName</a></code>&nbsp;インタフェース内&nbsp;<code><a href="../../../../../org/sxb/session/FindByPrincipalNameSessionRepository.html" title="org.sxb.session内のインタフェース">FindByPrincipalNameSessionRepository</a>&lt;org.sxb.session.data.redis.RedisOperationsSessionRepository.RedisSession&gt;</code></dd>
<dt><span class="paramLabel">パラメータ:</span></dt>
<dd><code>principalName</code> - the principal name (i.e. username) to search for</dd>
<dt><span class="returnLabel">戻り値:</span></dt>
<dd>a Map (never null) of the session id to the <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> of
         all sessions that contain the session attribute with the name
         <a href="../../../../../org/sxb/session/Session.html#PRINCIPAL_NAME_ATTRIBUTE_NAME"><code>Session.PRINCIPAL_NAME_ATTRIBUTE_NAME</code></a> and the value of
         the specified principal name. If no results are found, an empty
         Map is returned.</dd>
</dl>
</li>
</ul>
<a name="delete-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delete</h4>
<pre>public&nbsp;void&nbsp;delete(java.lang.String&nbsp;sessionId)</pre>
<div class="block"><span class="descfrmTypeLabel">インタフェースからコピーされた説明:&nbsp;<code><a href="../../../../../org/sxb/session/SessionRepository.html#delete-java.lang.String-">SessionRepository</a></code></span></div>
<div class="block">Deletes the <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> with the given <a href="../../../../../org/sxb/session/Session.html#getId--"><code>Session.getId()</code></a> or does nothing if the <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> is not found.</div>
<dl>
<dt><span class="overrideSpecifyLabel">定義:</span></dt>
<dd><code><a href="../../../../../org/sxb/session/SessionRepository.html#delete-java.lang.String-">delete</a></code>&nbsp;インタフェース内&nbsp;<code><a href="../../../../../org/sxb/session/SessionRepository.html" title="org.sxb.session内のインタフェース">SessionRepository</a>&lt;org.sxb.session.data.redis.RedisOperationsSessionRepository.RedisSession&gt;</code></dd>
<dt><span class="paramLabel">パラメータ:</span></dt>
<dd><code>sessionId</code> - the <a href="../../../../../org/sxb/session/Session.html#getId--"><code>Session.getId()</code></a> to delete</dd>
</dl>
</li>
</ul>
<a name="createSession--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createSession</h4>
<pre>public&nbsp;org.sxb.session.data.redis.RedisOperationsSessionRepository.RedisSession&nbsp;createSession()</pre>
<div class="block"><span class="descfrmTypeLabel">インタフェースからコピーされた説明:&nbsp;<code><a href="../../../../../org/sxb/session/SessionRepository.html#createSession--">SessionRepository</a></code></span></div>
<div class="block">Creates a new <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> that is capable of being persisted by this <a href="../../../../../org/sxb/session/SessionRepository.html" title="org.sxb.session内のインタフェース"><code>SessionRepository</code></a>.

 <p>This allows optimizations and customizations in how the <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> is persisted. For example, the
 implementation returned might keep track of the changes ensuring that only the delta needs to be persisted on
 a save.</p></div>
<dl>
<dt><span class="overrideSpecifyLabel">定義:</span></dt>
<dd><code><a href="../../../../../org/sxb/session/SessionRepository.html#createSession--">createSession</a></code>&nbsp;インタフェース内&nbsp;<code><a href="../../../../../org/sxb/session/SessionRepository.html" title="org.sxb.session内のインタフェース">SessionRepository</a>&lt;org.sxb.session.data.redis.RedisOperationsSessionRepository.RedisSession&gt;</code></dd>
<dt><span class="returnLabel">戻り値:</span></dt>
<dd>a new <a href="../../../../../org/sxb/session/Session.html" title="org.sxb.session内のインタフェース"><code>Session</code></a> that is capable of being persisted by this <a href="../../../../../org/sxb/session/SessionRepository.html" title="org.sxb.session内のインタフェース"><code>SessionRepository</code></a></dd>
</dl>
</li>
</ul>
<a name="onMessage-org.sxb.session.data.redis.Message-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onMessage</h4>
<pre>public&nbsp;void&nbsp;onMessage(<a href="../../../../../org/sxb/session/data/redis/Message.html" title="org.sxb.session.data.redis内のインタフェース">Message</a>&nbsp;message,
                      byte[]&nbsp;pattern)</pre>
<div class="block"><span class="descfrmTypeLabel">インタフェースからコピーされた説明:&nbsp;<code><a href="../../../../../org/sxb/session/data/redis/MessageListener.html#onMessage-org.sxb.session.data.redis.Message-byte:A-">MessageListener</a></code></span></div>
<div class="block">Callback for processing received objects through Redis.</div>
<dl>
<dt><span class="overrideSpecifyLabel">定義:</span></dt>
<dd><code><a href="../../../../../org/sxb/session/data/redis/MessageListener.html#onMessage-org.sxb.session.data.redis.Message-byte:A-">onMessage</a></code>&nbsp;インタフェース内&nbsp;<code><a href="../../../../../org/sxb/session/data/redis/MessageListener.html" title="org.sxb.session.data.redis内のインタフェース">MessageListener</a></code></dd>
<dt><span class="paramLabel">パラメータ:</span></dt>
<dd><code>message</code> - message</dd>
<dd><code>pattern</code> - pattern matching the channel (if specified) - can be null</dd>
</dl>
</li>
</ul>
<a name="handleCreated-java.util.Map-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>handleCreated</h4>
<pre>public&nbsp;void&nbsp;handleCreated(java.util.Map&lt;java.lang.Object,java.lang.Object&gt;&nbsp;loaded,
                          java.lang.String&nbsp;channel)</pre>
</li>
</ul>
<a name="setRedisKeyNamespace-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRedisKeyNamespace</h4>
<pre>public&nbsp;void&nbsp;setRedisKeyNamespace(java.lang.String&nbsp;namespace)</pre>
</li>
</ul>
<a name="getSessionCreatedChannelPrefix--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getSessionCreatedChannelPrefix</h4>
<pre>public&nbsp;java.lang.String&nbsp;getSessionCreatedChannelPrefix()</pre>
<div class="block">Gets the prefix for the channel that SessionCreatedEvent are published to. The suffix is the session id of the session that was created.</div>
<dl>
<dt><span class="returnLabel">戻り値:</span></dt>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="ナビゲーション・リンクをスキップ">ナビゲーション・リンクをスキップ</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="ナビゲーション">
<li><a href="../../../../../overview-summary.html">概要</a></li>
<li><a href="package-summary.html">パッケージ</a></li>
<li class="navBarCell1Rev">クラス</li>
<li><a href="class-use/RedisOperationsSessionRepository.html">使用</a></li>
<li><a href="package-tree.html">階層ツリー</a></li>
<li><a href="../../../../../deprecated-list.html">非推奨</a></li>
<li><a href="../../../../../index-files/index-1.html">索引</a></li>
<li><a href="../../../../../help-doc.html">ヘルプ</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/sxb/session/data/redis/MessageListener.html" title="org.sxb.session.data.redis内のインタフェース"><span class="typeNameLink">前のクラス</span></a></li>
<li><a href="../../../../../org/sxb/session/data/redis/SessionMessageListener.html" title="org.sxb.session.data.redis内のクラス"><span class="typeNameLink">次のクラス</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/sxb/session/data/redis/RedisOperationsSessionRepository.html" target="_top">フレーム</a></li>
<li><a href="RedisOperationsSessionRepository.html" target="_top">フレームなし</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">すべてのクラス</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li>ネスト&nbsp;|&nbsp;</li>
<li>フィールド&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">コンストラクタ</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">メソッド</a></li>
</ul>
<ul class="subNavList">
<li>詳細:&nbsp;</li>
<li>フィールド&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">コンストラクタ</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">メソッド</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
